# phoneasker

Проект развернут
Бот @phone_asker_bot

### Краткое описание
1. Заходим в бот, нажимаем старт
2. Телеграм отправляет update на хук развернутого сервера на Django
3. Вьюшка приложения askerbot получает update и обрабатывает его
4. Если пришла команда /start, то в базе создается запись с id пользователя telegram 
и отправляется кнопка для отправки контакта
5. Пользователь нажимает кнопку в telegram и отправляет свой контакт
6. Если на хук приходит контакт и запись с id пользователя уже есть,
то приложение дописывает данные в базу, отправляет сообщение и убирает у пользователя кнопку,
отправляет контакт в NOVA.

### Что и где
```
askerbot/views.py - основная логика
```
_Логики мало, выносить отдельно не стал, так как это основной контент и так читать пока проще_
```
askerbot/handlers.py - ручка для отправки post в Nova
```
```
askerbot/utils.py - клавиатуру сложил
```
```
.env_example - пример используемых переменных окружения
```
```
phoneasker/settings/base.py - базовые настройки для разработки
```
```
phoneasker/settings/production.py - настройки для прода
```

### Что использовал (зависимости)
```
Django==4.0.6
```
В ТЗ просили Django
```
mysqlclient
```
Для MySQL. Деплоил на своем JINO, а там у меня только MySQL оплачен. Так исторически сложилось.
Обычно все проекты с Docker, там делал бы контейнер с Postgres. 
```
python-dotenv==0.20.0
```
Для переменных тк без докера и сразу в контейнер не добавить.
```
python-telegram-bot==13.13
```
На requests оказалось все описывать очень громоздко. Сам бот не запускается используются элементы.
```
requests==2.28.1
```
Отправлять запросы

### Переменные окружения
```
BOT_TOKEN -токен от бота
```
```
SECRET_KEY -секрет от Django
```
```
DB_NAME -имя базы данных
```
```
DB_USER -пользователь бд
```
```
DB_PASS -пароль для бд
```